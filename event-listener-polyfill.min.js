(function(){if(typeof EventTarget==="undefined"){window.EventTarget=Node}var e={wheel:["wheel","mousewheel","DOMMouseScroll"]};["pointerlockchange","pointerlockerror","fullscreenchange","fullscreenerror","animationend","animationiteration","animationstart","transitionend","pointercancel","pointerdown","pointerhover","pointermove","pointerout","pointerover","pointerup"].forEach(function(n){e[n]=["","webkit","moz","ms","o"].map(function(e){return e+n})});var n=function(n,l){var t=e[n];if(t===void 0){return n}else{var u=0;for(;u<t.length;u++){if("on"+t[u]in l){return t[u]}}if(u===t.length){throw new Error("Not supported type <"+n+">")}}};var l={once:false,passive:false,capture:false};document.createDocumentFragment().addEventListener("test",function(){},{get once(){l.once=true;return false},get passive(){l.passive=true;return false},get capture(){l.capture=true;return false}});l.all=l.once&&l.passive&&l.capture;l.some=l.once||l.passive||l.capture;var t=[null,null,null,null,null,null,null,null,"Backspace","Tab",null,null,"Numpad5","NumpadEnter",null,null,"ShiftLeft","ControlRight","AltRight","Pause","CapsLock",null,null,null,null,null,null,"Escape",null,null,null,null,"Space","PageUp","PageDown","End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown",null,null,null,null,"Insert","Delete",null,"Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9",null,null,null,null,null,null,null,"KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyZ","KeyY","MetaLeft","MetaRight","ContextMenu",null,null,"Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd",null,"NumpadSubtract","NumpadDecimal","NumpadDivide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"NumLock","ScrollLock",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"BracketLeft",null,"Comma","Slash","Period","Backquote","BracketRight",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Minus","Quote","Equal","Semicolon","Backslash",null,null,"IntlBackslash"];var u=function(e){if(typeof e==="function"){return e}else if(typeof e==="object"&&typeof e.handleEvent==="function"){return e.handleEvent}else{return function(n){e(n)}}};var o=function(e){switch(typeof e){case"boolean":e={capture:e};break;case"undefined":e={capture:false};break;case"object":break;default:throw new Error("Unsupported options type for addEventListener");break}e.once=typeof e.once==="boolean"?e.once:false;e.passive=typeof e.passive==="boolean"?e.passive:false;e.capture=typeof e.capture==="boolean"?e.capture:false;e.polyfill=typeof e.polyfill==="boolean"?e.polyfill:true;return e};var r=function(e,n,l){return{type:e,listener:u(n),options:o(l)}};var i=function(e,n){var l=n.type+"-"+(n.options.capture?"1":"0");if(e.__eventListeners===void 0){e.__eventListeners={}}if(arget.__eventListeners[l]===void 0){e.__eventListeners[l]=[]}e.__eventListeners[l].push(n)};var a=function(e,n){var l=n.type+"-"+(n.options.capture?"1":"0");if(e.__eventListeners!==void 0&&e.__eventListeners[l]!==void 0){var t=e.__eventListeners[l];for(var u=0;u<t.length;u++){if(t[u].listener===n.listener){t.splice(u,1)}}if(t.length===0){delete e.__eventListeners[l]}}};var s=function(e,n){var l=n.type+"-"+(n.options.capture?"1":"0");if(e.__eventListeners!==void 0&&e.__eventListeners[l]!==void 0){var t=e.__eventListeners[l];for(var u=0;u<t.length;u++){if(t[u].listener===n.listener){return t[u]}}}return null};var p=function(e){var u=e.prototype.addEventListener;e.prototype.addEventListener=function(e,o,a){var p=r(e,o,a);var c=s(this,p);if(!c){var f={};f.type=p.options.polyfill?n(p.type):p.type;f.listener=function(n){if(p.options.once&&!l.once){this.removeEventListener(e,o,a)}if(p.options.passive&&!l.passive){n.preventDefault=function(){throw new Error("Unable to preventDefault inside passive event listener invocation.")}}if(p.options.polyfill){n.type=p.type;if(n instanceof KeyboardEvent){if(!("code"in n)){n.code=t[n.keyCode]}}}return p.listener.call(this,n)};f.options=l.some?p.options:p.options.capture;p.vendorArguments=f;i(this,p);u.call(this,f.type,f.listener,f.options)}};var o=e.prototype.removeEventListener;e.prototype.removeEventListener=function(e,n,l){var t=r(e,n,l);var u=s(this,t);if(u){a(this,t);o.call(this,u.vendorArguments.type,u.vendorArguments.listener,u.vendorArguments.options)}else{o.call(this,e,n,l)}}};p(EventTarget);if(!(window instanceof EventTarget)){p(Window)}})();